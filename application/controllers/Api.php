<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Api extends MY_Controller {
	public function __construct(){
		parent::__construct();
	}

	public function product($process='save'){
		$encrypt_key = $this->input->post('encrypt_key');
		$product = $this->input->post('product');

//		if( $encrypt_key !== 'e8b6a94f577bd529c2e67da6aa449219' ){
//			echo "ERR";
//			exit;
//		}

		$product = '{"shop_code": "choitem", "product_no": "451", "product_link": "http://choitemb2b.com/product/%EC%B4%88%EA%B2%BD%EB%9F%89-%EC%A0%91%EC%9D%B4%EC%8B%9D-%EC%88%84%EB%8D%94%EB%B0%B1/451/category/28/display/1/", "product_name": "\ucd08\uacbd\ub7c9 \uc811\uc774\uc2dd \uc204\ub354\ubc31", "product_info": "\uacf5\uae09\uac00 5,400\uc6d0\n\ucd5c\uc800 \ud310\ub9e4 \uc900\uc218\uac00 6,800\uc6d0\n\ubc30\uc1a1\ubc29\ubc95 \ud0dd\ubc30\n\ubc30\uc1a1\ube44 2,500\uc6d0 ~ 25,000\uc6d0\n\uc790\uccb4\uc0c1\ud488\ucf54\ub4dc WH130\n\uc81c\uc870\uad6d \uc911\uad6d\n\uc81c\uc870\uc0ac \ucd08\uc774\ud15c\ud611\ub825\uc5c5\uccb4\n\uc0c9\uc0c1\n- [\ud544\uc218] \uc635\uc158\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694 -\n-------------------\n\ud551\ud06c\n\ub124\uc774\ube44\n(\ucd5c\uc18c\uc8fc\ubb38\uc218\ub7c9 1\uac1c \uc774\uc0c1)\n\uc704 \uc635\uc158\uc120\ud0dd \ubc15\uc2a4\ub97c \uc120\ud0dd\ud558\uc2dc\uba74 \uc544\ub798\uc5d0 \uc0c1\ud488\uc774 \ucd94\uac00\ub429\ub2c8\ub2e4.", "product_info_html": "\n                    <div class=\"xans-element- xans-product xans-product-detaildesign\"><!--\n                            \ucd9c\ub825 \uac2f\uc218 \uc9c0\uc815 \ubcc0\uc218, \uc5c6\uc73c\uba74 \uc124\uc815\ub41c \uc804\uccb4\uac00 \ub098\uc635\ub2c8\ub2e4.\n                            count = 10\n                        -->\n<table border=\"1\" summary=\"\">\n<caption> \uae30\ubcf8 \uc815\ubcf4</caption>\n                            <tbody>\n<!-- \uc0c1\ud488\uba85 --><tr class=\" displaynone xans-record-\">\n<th scope=\"row\"><span style=\"font-size:12px;color:#555555;font-weight:bold;\">\uc0c1\ud488\uba85</span></th>\n                                    <td><span style=\"font-size:12px;color:#555555;font-weight:bold;\">\ucd08\uacbd\ub7c9 \uc811\uc774\uc2dd \uc204\ub354\ubc31</span></td>\n                                </tr>\n<!-- \ud310\ub9e4\uac00 --><tr class=\" price xans-record-\">\n<th scope=\"row\">\uacf5\uae09\uac00</th>\n                                    <td><span style=\"font-size:12px;color:#90173b;font-weight:bold;\"><strong id=\"span_product_price_text\">5,400\uc6d0</strong><input id=\"product_price\" name=\"product_price\" value=\"\" type=\"hidden\"></span></td>\n                                </tr>\n<tr class=\" xans-record-\">\n<th scope=\"row\"><span style=\"font-size:12px;color:#00078f;font-weight:bold;\">\ucd5c\uc800 \ud310\ub9e4 \uc900\uc218\uac00</span></th>\n                                    <td><span style=\"font-size:12px;color:#00078f;font-weight:bold;\">6,800\uc6d0</span></td>\n                                </tr>\n<tr class=\" xans-record-\">\n<th scope=\"row\"><span style=\"font-size:12px;color:#555555;\">\ubc30\uc1a1\ubc29\ubc95</span></th>\n                                    <td><span style=\"font-size:12px;color:#555555;\">\ud0dd\ubc30</span></td>\n                                </tr>\n<tr class=\" xans-record-\">\n<th scope=\"row\"><span style=\"font-size:12px;color:#555555;\">\ubc30\uc1a1\ube44</span></th>\n                                    <td><span style=\"font-size:12px;color:#555555;\"><span class=\"delv_price_B\"><input id=\"delivery_cost_prepaid\" name=\"delivery_cost_prepaid\" value=\"P\" type=\"hidden\">2,500\uc6d0 ~ <strong>25,000\uc6d0</strong>\n            <div class=\"btnTooltip ec-front-shop-delivery-defferent-shipping\">\n                <a href=\"#none\"><img src=\"//img.echosting.cafe24.com/design/skin/default/common/ico_tooltip.gif\" alt=\"\ub3c4\uc6c0\ub9d0\"></a>\n                <div class=\"differentialShipping layerTheme\">\n                    <h3 class=\"title\">\uad6c\ub9e4\uc870\uac74\uc5d0 \ub530\ub77c \ubc30\uc1a1\ube44 \ucc28\ub4f1\ubd80\uacfc</h3>\n                    <div class=\"content\">\n                        <ul>\n                          <li><strong>1\uac1c \uc774\uc0c1 ~ 11\uac1c \ubbf8\ub9cc</strong><span>2,500\uc6d0</span></li><li><strong>11\uac1c \uc774\uc0c1 ~ 21\uac1c \ubbf8\ub9cc</strong><span>5,000\uc6d0</span></li><li><strong>21\uac1c \uc774\uc0c1 ~ 31\uac1c \ubbf8\ub9cc</strong><span>7,500\uc6d0</span></li><li><strong>31\uac1c \uc774\uc0c1 ~ 41\uac1c \ubbf8\ub9cc</strong><span>10,000\uc6d0</span></li><li><strong>41\uac1c \uc774\uc0c1 ~ 51\uac1c \ubbf8\ub9cc</strong><span>12,500\uc6d0</span></li><li><strong>51\uac1c \uc774\uc0c1 ~ 61\uac1c \ubbf8\ub9cc</strong><span>15,000\uc6d0</span></li><li><strong>61\uac1c \uc774\uc0c1 ~ 71\uac1c \ubbf8\ub9cc</strong><span>17,500\uc6d0</span></li><li><strong>71\uac1c \uc774\uc0c1 ~ 81\uac1c \ubbf8\ub9cc</strong><span>20,000\uc6d0</span></li><li><strong>81\uac1c \uc774\uc0c1 ~ 91\uac1c \ubbf8\ub9cc</strong><span>22,500\uc6d0</span></li><li><strong>91\uac1c \uc774\uc0c1 ~ 101\uac1c \ubbf8\ub9cc</strong><span>25,000\uc6d0</span></li>\n                        </ul>\n                    </div>\n                    <div class=\"close\"><a href=\"#none\"><img src=\"//img.echosting.cafe24.com/design/skin/default/common/btn_close.gif\" alt=\"\ub2eb\uae30\"></a></div>\n                </div>\n            </div>\n        </span></span></td>\n                                </tr>\n<tr class=\" xans-record-\">\n<th scope=\"row\"><span style=\"font-size:12px;color:#555555;\">\uc790\uccb4\uc0c1\ud488\ucf54\ub4dc</span></th>\n                                    <td><span style=\"font-size:12px;color:#555555;\">WH130</span></td>\n                                </tr>\n<tr class=\" xans-record-\">\n<th scope=\"row\"><span style=\"font-size:12px;color:#555555;\">\uc81c\uc870\uad6d</span></th>\n                                    <td><span style=\"font-size:12px;color:#555555;\">\uc911\uad6d </span></td>\n                                </tr>\n<tr class=\" xans-record-\">\n<th scope=\"row\"><span style=\"font-size:12px;color:#555555;\">\uc81c\uc870\uc0ac</span></th>\n                                    <td><span style=\"font-size:12px;color:#555555;\">\ucd08\uc774\ud15c\ud611\ub825\uc5c5\uccb4</span></td>\n                                </tr>\n</tbody>\n</table>\n</div>\n\n                    <!-- \uc815\uae30 \uacb0\uc7ac \ucd94\uac00 \ub0b4\uc6a9-->\n                    <div class=\"regularDelivery displaynone\">\n                        <div class=\"head\">\n                            <strong class=\"title\">\uad6c\ub9e4\ubc29\ubc95</strong>\n                            <label class=\"gLabel\"> 1\ud68c\uad6c\ub9e4</label>\n                            <label class=\"gLabel\"> \uc815\uae30\ubc30\uc1a1</label>\n                        </div>\n                        <div class=\"shippingCycle displaynone\" id=\"\">\n                            <p class=\"title\">\ubc30\uc1a1\uc8fc\uae30</p>\n                            <div class=\"xans-element- xans-product xans-product-regularperiod button\"><label class=\"gLabel \"><span class=\"txt\"></span></label></div>\n                        </div>\n                    </div>\n<!-- \uc815\uae30 \uacb0\uc7ac \ucd94\uac00 \ub0b4\uc6a9 \ub05d -->\n\n                    <p class=\"displaynone\"><img src=\"//img.echosting.cafe24.com/skin/base_ko_KR/product/txt_naver.gif\" alt=\"\uac1c\uc778\uacb0\uc81c\ucc3d\uc744 \ud1b5\ud55c \uacb0\uc81c \uc2dc \ub124\uc774\ubc84 \ub9c8\uc77c\ub9ac\uc9c0 \uc801\ub9bd \ubc0f \uc0ac\uc6a9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\"></p>\n\n                    <table border=\"1\" summary=\"\" class=\"xans-element- xans-product xans-product-option xans-record-\"><caption>\uc0c1\ud488 \uc635\uc158</caption>\n<tbody></tbody><tbody class=\"xans-element- xans-product xans-product-option xans-record-\"><tr>\n<th scope=\"row\">\uc0c9\uc0c1</th>\n                                <td><select option_product_no=\"451\" option_select_element=\"ec-option-select-finder\" option_sort_no=\"1\" option_type=\"T\" item_listing_type=\"S\" option_title=\"\uc0c9\uc0c1\" product_type=\"product_option\" product_option_area=\"product_option_451_0\" name=\"option1\" id=\"product_option_id1\" class=\"ProductOption0\" option_style=\"select\" required=\"true\"><option value=\"*\" selected=\"\" link_image=\"\">- [\ud544\uc218] \uc635\uc158\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694 -</option><option value=\"**\" disabled=\"\" link_image=\"\">-------------------</option><option value=\"\ud551\ud06c\" link_image=\"\">\ud551\ud06c</option><option value=\"\ub124\uc774\ube44\" link_image=\"\">\ub124\uc774\ube44</option></select><p class=\"value\"></p>\n</td>\n                            </tr></tbody>\n<tbody>\n<tr class=\"displaynone\" id=\"\">\n<td colspan=\"2\" class=\"selectButton\"><a href=\"#none\" class=\"btnSubmit sizeS\" onclick=\"\">\uc635\uc158\uc120\ud0dd</a></td>\n                            </tr></tbody>\n</table>\n<div class=\"guideArea\">\n                        <p class=\"info \">(\ucd5c\uc18c\uc8fc\ubb38\uc218\ub7c9 1\uac1c \uc774\uc0c1<span class=\"displaynone\"> / \ucd5c\ub300\uc8fc\ubb38\uc218\ub7c9 0\uac1c \uc774\ud558</span>)</p>\n                        <span class=\"sizeGuide displaynone\"><a href=\"#none\" class=\"size_guide_info -mov\" product_no=\"451\"><i class=\"xi-border-style\"></i> \uc0ac\uc774\uc988 \uac00\uc774\ub4dc</a></span>\n                    </div>\n\n                    \n                    \n                    <div id=\"totalProducts\" class=\"\">\n                        <p class=\"ec-base-help txtWarn txt11 displaynone\"> \uc218\ub7c9\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.</p>\n                        <p class=\"ec-base-help txtWarn txt11 \"> \uc704 \uc635\uc158\uc120\ud0dd \ubc15\uc2a4\ub97c \uc120\ud0dd\ud558\uc2dc\uba74 \uc544\ub798\uc5d0 \uc0c1\ud488\uc774 \ucd94\uac00\ub429\ub2c8\ub2e4.</p>\n                        <table border=\"1\" summary=\"\">\n<caption>\uc0c1\ud488 \ubaa9\ub85d</caption>\n                            <colgroup>\n<col style=\"width:55%;\">\n<col style=\"width:15%;\">\n<col style=\"width:30%;\">\n</colgroup>\n<thead><tr>\n<th scope=\"col\">\uc0c1\ud488\uba85</th>\n                                    <th scope=\"col\">\uc0c1\ud488\uc218</th>\n                                    <th scope=\"col\">\uac00\uaca9</th>\n                                </tr></thead>\n<tbody class=\"displaynone\"><tr>\n<td>\ucd08\uacbd\ub7c9 \uc811\uc774\uc2dd \uc204\ub354\ubc31</td>\n                                    <td>\n                                        <span class=\"quantity\">\n                                            <input id=\"quantity\" name=\"quantity_name\" style=\"\" value=\"0\" type=\"text\">                                            <a href=\"#none\"><img src=\"//img.echosting.cafe24.com/skin/base_ko_KR/product/btn_count_up.gif\" alt=\"\uc218\ub7c9\uc99d\uac00\" class=\"QuantityUp up\"></a>\n                                            <a href=\"#none\"><img src=\"//img.echosting.cafe24.com/skin/base_ko_KR/product/btn_count_down.gif\" alt=\"\uc218\ub7c9\uac10\uc18c\" class=\"QuantityDown down\"></a>\n                                        </span>\n                                    </td>\n                                    <td class=\"right\">\n<span class=\"quantity_price\">5400</span> <span class=\"mileage displaynone\">(<img src=\"//img.echosting.cafe24.com/design/skin/admin/ko_KR/ico_product_point.gif\"> &nbsp;<span class=\"mileage_price\">0</span>)</span>\n</td>\n                                </tr></tbody>\n<!-- \uc635\uc158\uc120\ud0dd \ub610\ub294 \uc138\ud2b8\uc0c1\ud488 \uc120\ud0dd\uc2dc \uc0c1\ud488\uc774 \ucd94\uac00\ub418\ub294 \uc601\uc5ed\uc785\ub2c8\ub2e4. \uc1fc\ud551\ubab0 \ud654\uba74\uc5d0\ub294 \uc544\ub798\uc640 \uac19\uc740 \ub9c8\ud06c\uc5c5\uad6c\uc870\ub85c \ud45c\uc2dc\ub429\ub2c8\ub2e4. \uc0ad\uc81c\uc2dc \uae30\ub2a5\uc774 \uc815\uc0c1\ub3d9\uc791 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. --><tbody><!-- tr>\n                                    <td>\n                                        <p class=\"product\">\n                                            $\uc0c1\ud488\uba85<br />\n                                            <span>$\uc635\uc158</span>\n                                        </p>\n                                    </td>\n                                    <td>\n                                        <span class=\"quantity\">\n                                            <input type=\"text\" class=\"quantity_opt\" />\n                                            &nbsp;<a href=\"#none\"><img src=\"//img.echosting.cafe24.com/skin/base_ko_KR/product/btn_count_up.gif\" alt=\"\uc218\ub7c9\uc99d\uac00\" class=\"up\" /></a>\n                                            <a href=\"#none\"><img src=\"//img.echosting.cafe24.com/skin/base_ko_KR/product/btn_count_down.gif\" alt=\"\uc218\ub7c9\uac10\uc18c\" class=\"down\" /></a>\n                                        </span>\n                                        <a href=\"#none\"><img src=\"//img.echosting.cafe24.com/design/skin/default/product/btn_price_delete.gif\" alt=\"\uc0ad\uc81c\" class=\"option_box_del\" /></a>\n                                    </td>\n                                    <td class=\"right\">\n                                        <span>$\uac00\uaca9</span>\n                                        <span class=\"mileage\">(<img src=\"//img.echosting.cafe24.com/design/skin/admin/ko_KR/product/ico_pay_point.gif\" /> &nbsp;<span class=\"mileage_price\">$\uc801\ub9bd\uae08</span>)</span>\n                                    </td>\n                                </tr --></tbody>\n<!-- // \uc635\uc158\uc120\ud0dd \ub610\ub294 \uc138\ud2b8\uc0c1\ud488 \uc120\ud0dd\uc2dc \uc0c1\ud488\uc774 \ucd94\uac00\ub418\ub294 \uc601\uc5ed\uc785\ub2c8\ub2e4. \uc1fc\ud551\ubab0 \ud654\uba74\uc5d0\ub294 \uc544\ub798\uc640 \uac19\uc740 \ub9c8\ud06c\uc5c5\uad6c\uc870\ub85c \ud45c\uc2dc\ub429\ub2c8\ub2e4. \uc0ad\uc81c\uc2dc \uae30\ub2a5\uc774 \uc815\uc0c1\ub3d9\uc791 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. -->\n</table>\n</div>\n\t\t\t\t", "product_detail_info_html": "\n            <p></p><div style=\"text-align: center;\"><img alt=\"\" ec-data-src=\"/web/upload/NNEditor/20210408/01_shop1_133002.jpg\" style=\"font-size: 9pt;\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=\"></div><p style=\"text-align: center;\">&nbsp;</p><div style=\"text-align: center;\"><img alt=\"\" ec-data-src=\"/web/upload/NNEditor/20210408/02_shop1_133002.jpg\" style=\"font-size: 9pt;\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=\"></div><p style=\"text-align: center;\">&nbsp;</p><div style=\"text-align: center;\"><img alt=\"\" ec-data-src=\"/web/upload/NNEditor/20210408/03_shop1_133002.jpg\" style=\"font-size: 9pt;\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=\"></div><p style=\"text-align: center;\">&nbsp;</p><div style=\"text-align: center;\"><img alt=\"\" ec-data-src=\"/web/upload/NNEditor/20210408/04_shop1_133003.jpg\" style=\"font-size: 9pt;\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=\"></div><p style=\"text-align: center;\">&nbsp;</p><div style=\"text-align: center;\"><img alt=\"\" ec-data-src=\"/web/upload/NNEditor/20210408/05_shop1_133003.jpg\" style=\"font-size: 9pt;\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=\"></div><p style=\"text-align: center;\">&nbsp;</p><div style=\"text-align: center;\"><br></div><p></p>        ", "product_info_list": [{"info_name": "", "info_value": "", "seq": 1}, {"info_name": "\uacf5\uae09\uac00", "info_value": "5,400\uc6d0", "seq": 2}, {"info_name": "\ucd5c\uc800 \ud310\ub9e4 \uc900\uc218\uac00", "info_value": "6,800\uc6d0", "seq": 3}, {"info_name": "\ubc30\uc1a1\ubc29\ubc95", "info_value": "\ud0dd\ubc30", "seq": 4}, {"info_name": "\ubc30\uc1a1\ube44", "info_value": "2,500\uc6d0 ~ 25,000\uc6d0", "seq": 5}, {"info_name": "\uc790\uccb4\uc0c1\ud488\ucf54\ub4dc", "info_value": "WH130", "seq": 6}, {"info_name": "\uc81c\uc870\uad6d", "info_value": "\uc911\uad6d", "seq": 7}, {"info_name": "\uc81c\uc870\uc0ac", "info_value": "\ucd08\uc774\ud15c\ud611\ub825\uc5c5\uccb4", "seq": 8}, {"info_name": "\uc0c9\uc0c1", "info_value": "- [\ud544\uc218] \uc635\uc158\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694 -\n-------------------\n\ud551\ud06c\n\ub124\uc774\ube44", "seq": 9}], "product_option_list": [{"option_name": "\uc0c9\uc0c1", "option_value": "- [\ud544\uc218] \uc635\uc158\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694 -\n-------------------\n\ud551\ud06c\n\ub124\uc774\ube44", "seq": 1}], "product_etc_info": [{"info_title": "\uc0c1\ud488\uacb0\uc81c\uc815\ubcf4", "info_desc": "\uace0\uc561\uacb0\uc81c\uc758 \uacbd\uc6b0 \uc548\uc804\uc744 \uc704\ud574 \uce74\ub4dc\uc0ac\uc5d0\uc11c \ud655\uc778\uc804\ud654\ub97c \ub4dc\ub9b4 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\uacfc\uc815\uc5d0\uc11c \ub3c4\ub09c \uce74\ub4dc\uc758 \uc0ac\uc6a9\uc774\ub098 \ud0c0\uc778 \uba85\uc758\uc758 \uc8fc\ubb38\ub4f1 \uc815\uc0c1\uc801\uc778 \uc8fc\ubb38\uc774 \uc544\ub2c8\ub77c\uace0 \ud310\ub2e8\ub420 \uacbd\uc6b0 \uc784\uc758\ub85c \uc8fc\ubb38\uc744 \ubcf4\ub958 \ub610\ub294 \ucde8\uc18c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \n\n\ubb34\ud1b5\uc7a5 \uc785\uae08\uc740 \uc0c1\ud488 \uad6c\ub9e4 \ub300\uae08\uc740 PC\ubc45\ud0b9, \uc778\ud130\ub137\ubc45\ud0b9, \ud154\ub808\ubc45\ud0b9 \ud639\uc740 \uac00\uae4c\uc6b4 \uc740\ud589\uc5d0\uc11c \uc9c1\uc811 \uc785\uae08\ud558\uc2dc\uba74 \ub429\ub2c8\ub2e4.  \n\uc8fc\ubb38\uc2dc \uc785\ub825\ud55c \uc785\uae08\uc790\uba85\uacfc \uc2e4\uc81c\uc785\uae08\uc790\uc758 \uc131\uba85\uc774 \ubc18\ub4dc\uc2dc \uc77c\uce58\ud558\uc5ec\uc57c \ud558\uba70, 7\uc77c \uc774\ub0b4\ub85c \uc785\uae08\uc744 \ud558\uc154\uc57c \ud558\uba70 \uc785\uae08\ub418\uc9c0 \uc54a\uc740 \uc8fc\ubb38\uc740 \uc790\ub3d9\ucde8\uc18c \ub429\ub2c8\ub2e4.", "seq": 1}, {"info_title": "\ubc30\uc1a1\uc815\ubcf4", "info_desc": "\ubc30\uc1a1 \ubc29\ubc95 : \ud0dd\ubc30\n\ubc30\uc1a1 \uc9c0\uc5ed : \uc804\uad6d\uc9c0\uc5ed\n\ubc30\uc1a1 \ube44\uc6a9 : 2,500\uc6d0 ~ 25,000\uc6d0\n\ubc30\uc1a1 \uae30\uac04 : 3\uc77c ~ 7\uc77c\n\ubc30\uc1a1 \uc548\ub0b4 : - \ub3c4\uc11c\uc0b0\uac04 \ucd94\uac00\ubc30\uc1a1\ube44: \uc81c\uc8fc\ub3c4 \ubc0f \uadf8 \ubd80\uc18d \ub3c4\uc11c 3,000 / \ub3c4\uc11c\uc9c0\ubc29 \ubc0f \uae30\ud0c0 \uc0b0\uac04\uc9c0\ubc29 5,000\uc6d0\n\uace0\uac1d\ub2d8\uaed8\uc11c \uc8fc\ubb38\ud558\uc2e0 \uc0c1\ud488\uc740 \uc785\uae08 \ud655\uc778\ud6c4 \ubc30\uc1a1\ud574 \ub4dc\ub9bd\ub2c8\ub2e4. \ub2e4\ub9cc, \uc0c1\ud488\uc885\ub958\uc5d0 \ub530\ub77c\uc11c \uc0c1\ud488\uc758 \ubc30\uc1a1\uc774 \ub2e4\uc18c \uc9c0\uc5f0\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4.", "seq": 2}, {"info_title": "\uad50\ud658 \ubc0f \ubc18\ud488\uc815\ubcf4", "info_desc": "\uad50\ud658 \ubc0f \ubc18\ud488 \uc8fc\uc18c\n- [14319] \uacbd\uae30\ub3c4 \uad11\uba85\uc2dc \ud558\uc548\ub85c 108 (\uc18c\ud558\ub3d9) \uc5d0\uc774\uc2a4 \uad11\uba85\ud0c0\uc6cc 313\ud638", "seq": 3}, {"info_title": "\uc11c\ube44\uc2a4\ubb38\uc758", "info_desc": "", "seq": 4}], "product_img": [{"img_url": "http://choitemb2b.com/web/product/small/202104/7a31af53ccc43e48a1d19106832afa29.jpg", "img_file_name": "product_451_1.jpg", "img_file_full_path": "./_data/product_451_1.jpg", "seq": 1}, {"img_url": "http://choitemb2b.com/web/product/extra/small/202104/275a816abe0037b6b7b0bb3d97b4fd99.jpg", "img_file_name": "product_451_2.jpg", "img_file_full_path": "./_data/product_451_2.jpg", "seq": 2}], "detail_img": [{"img_url": "/web/upload/NNEditor/20210408/01_shop1_133002.jpg", "img_file_name": "product_451_detail_1.jpg", "img_file_full_path": "./_data/product_451_detail_1.jpg", "seq": 1}, {"img_url": "/web/upload/NNEditor/20210408/02_shop1_133002.jpg", "img_file_name": "product_451_detail_2.jpg", "img_file_full_path": "./_data/product_451_detail_2.jpg", "seq": 2}, {"img_url": "/web/upload/NNEditor/20210408/03_shop1_133002.jpg", "img_file_name": "product_451_detail_3.jpg", "img_file_full_path": "./_data/product_451_detail_3.jpg", "seq": 3}, {"img_url": "/web/upload/NNEditor/20210408/04_shop1_133003.jpg", "img_file_name": "product_451_detail_4.jpg", "img_file_full_path": "./_data/product_451_detail_4.jpg", "seq": 4}, {"img_url": "/web/upload/NNEditor/20210408/05_shop1_133003.jpg", "img_file_name": "product_451_detail_5.jpg", "img_file_full_path": "./_data/product_451_detail_5.jpg", "seq": 5}]}';
		$product = json_decode($product, true);
		$shop_code = $product['shop_code']; // 사이트 코드
		$product_no = $product['product_no']; // 상품 번호
		$product_link = $product['product_link']; // 상품 링크
		$product_name = $product['product_name']; // 상품 명
		$product_info = $product['product_info']; // 상품 정보 전체 텍스트
		$product_info_html = $product['product_info_html']; // 상품 정보 전체 HTML
		$product_detail_info_html = $product['product_detail_info_html']; // 상품 상세 정보 전체 HTML

		$product_info_list = $product['product_info_list']; // 상품 정보
		$product_option_list = $product['product_option_list']; // 옵션 정보
		$product_etc_info = $product['product_etc_info']; // 상품 기타 정보
		$product_img = $product['product_img']; // 이미지 정보
		$detail_img = $product['detail_img']; // 상세 이미지 정보

		$this->load->model('Product_m');
		$this->db->trans_begin();
		try{
			// 상품 기록
			$product_id = $this->Product_m->saveProduct([
				'shop_code'=>$shop_code,
				'product_no'=>$product_no,
				'product_link'=>$product_link,
				'product_name'=>$product_name,
				'product_info'=>$product_info,
				'product_info_html'=>$product_info_html,
				'product_detail_info_html'=>$product_detail_info_html,
			]);

			if( empty($product_id) ){
				throw new Exception('');
			}

			// 상품 정보 기록
			if( !empty($product_info_list) && is_array($product_info_list) ){
				$saveData = [];
				foreach ($product_info_list as $info) {
					$info_name = trim($info['info_name']);
					$info_value = trim($info['info_value']);
					if( $info_name == '' && $info_value == '' ){
						continue;
					}

					$saveData[] = [
						'product_id'=>$product_id,
						'info_name'=>$info_name,
						'info_value'=>$info_value,
						'seq'=>$info['seq'],
					];
				}
				$saveProductInfo = $this->Product_m->saveProductInfo($saveData);

				if( empty($saveProductInfo) ){
					throw new Exception('');
				}
			}
			
			$this->db->trans_commit();
		} catch (Exception $e){
			$this->db->trans_rollback();
		}
	}

	public function naver($keyword=''){
		$this->load->library('NaverSearchAdApi');
		if( empty($keyword) ){
			$keyword = $this->input->get('keyword', true) ?? '손목보호대';
		} else {
			$keyword = urldecode($keyword);
		}
		$dataList = $this->naversearchadapi->relKwdStat($keyword);
		echo "<pre>";
		print_r($dataList);
		echo "</pre>";
	}
}